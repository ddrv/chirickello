# Chirickello

Это такой Trello на минималках, но так для удобства восприятия попугаями, а так же во избежание судебных тяжб 
по поводу авторских прав и товарных знаков, я назвал его **Chirickello** 

Как развернуть проект?

Нужны make, docker и docker-compose

## Сборка

```bash
make build
```

## Настройка

Для настройки необходимо отредактировать файл `.env`. Настройте, как вам удобно (можно вообще оставить как есть)

| Переменная              | Значения                           | Описание                                                                                                                                    |
|-------------------------|------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| `DEBUG`                 | `0` или `1`                        | Режим отладки. Веб-сервисы добавляют на страницах ошибок отладочную информацию. Roadrunner запускает по одному воркеру с лимитом в 1 запрос |
| `LOCAL_API_PORT`        | целое число от `1` до `65535`      | Порт API-шлюза                                                                                                                              |
| `LOCAL_AUTH_PORT`       | целое число от `1` до `65535`      | Порт сервиса авторизации                                                                                                                    |
| `MAILHOG_PORT`          | целое число от `1` до `65535`      | Порт веб-интерфейса MailHog                                                                                                                 |
| `OAUTH_CLIENT_ID`       | строка                             | ID OAuth клиента                                                                                                                            |
| `OAUTH_CLIENT_SECRET`   | строка                             | Секретный код OAuth клиента                                                                                                                 |
| `OAUTH_CLIENT_REDIRECT` | uri                                | URI редиректа для получения токена по коду (рекомендую использовать корень API-шлюза)                                                       |
| `MAILER_DSN`            | строка                             | Настрока подключения к почтовому серверу                                                                                                    |
| `SENDER_EMAIL`          | email                              | Элетропочта отправителя писем                                                                                                               |
| `SENDER_NAME`           | строка                             | Имя отправителя писем                                                                                                                       |
| `RABBITMQ_USER`         | строка                             | Логин кролика                                                                                                                               |
| `RABBITMQ_PASSWORD`     | строка                             | Пароль кролика                                                                                                                              |
| `TIMER_SPEED`           | целое положительное число от `1`   | Ускорение времени (работает только при включенном режиме DEBUG)                                                                             |
| `TIMER_BEGIN`           | строка даты в формате `YYYY-MM-DD` | Дата, с которой начинается ускорение времени                                                                                                |

## Запуск

```bash
make start
```

## Добавление пользователей

- Можно воспользоваться командой `make create-user` и ввести ручками логины, емейлы, роли и т.д.
- А можно выполнить команду `make create-random-users` и у вас появится 10 пользователей

## Использование

Я не стал заморачиваться со многими вещами. Среди них - пользовательский интерфейс. Вместо этого есть Swagger UI 
В нём можно авторизоваться (на странице подтверждения доступа просто выбираем пользователя, 
для которого нужно получить токен) и потыкать методы API.

## Деплой

Не уверен, что это хорошая идея.
